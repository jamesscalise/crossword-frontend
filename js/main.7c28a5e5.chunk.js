(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{28:function(e,t,r){e.exports=r(40)},33:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(17),c=r.n(a),s=(r(33),r(3)),l=r(4),i=r(6),u=r(5),d=r(13),p=r(14),m=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).renderLinks=function(){return e.props.crosswords.map((function(e){return o.a.createElement(p.b,{style:{marginRight:"10px"},to:"/".concat(e.attributes.title.replace(/\s/g,""))},e.attributes.title)}))},e}return Object(l.a)(r,[{key:"render",value:function(){return o.a.createElement("div",{style:{borderBottom:"2px solid black",paddingBottom:"10px",marginBottom:"12px"}},o.a.createElement(p.b,{style:{marginRight:"10px"},to:"/"},"Home"),o.a.createElement(p.b,{style:{marginRight:"10px"},to:"/index"},"All Scores"),this.renderLinks())}}]),r}(n.Component),h=r(2),f=(r(39),function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return o.a.createElement("div",null,"Welcome, ","".concat(this.props.current_user),"! Enjoy the crosswords and try to beat the times! Time to test this")}}]),r}(n.Component)),b=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={text:""},e}return Object(l.a)(r,[{key:"handleOnChange",value:function(e){this.setState({text:e.target.value})}},{key:"handleOnSubmit",value:function(e){e.preventDefault(),this.props.handleAddUser(this.state.text),this.setState({text:""})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",null,"Welcome to my crossword app! I've imported a number of fun New York Times crosswords of varying difficulties. Before you begin, please enter a username so we may track your score."),o.a.createElement("form",{onSubmit:function(t){return e.handleOnSubmit(t)}},o.a.createElement("input",{type:"text",value:this.state.text,onChange:function(t){return e.handleOnChange(t)}}),o.a.createElement("input",{type:"submit"})))}}]),r}(n.Component),v=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={filter:"none"},e.computeTime=function(e){var t=Math.floor(e/60),r=e-60*t;return"".concat(t,"m ").concat(r,"s")},e.handleOnChange=function(t){console.log(t.target.value),e.setState({filter:t.target.value})},e.renderScores=function(t){return"none"==t?e.props.scores.map((function(t){return o.a.createElement("div",null,o.a.createElement("div",null,"Crossword:",t.crossword.title),o.a.createElement("div",null,"User: ",t.username),o.a.createElement("div",null,"Time: ",e.computeTime(t.time)),o.a.createElement("br",null))})):e.props.scores.filter((function(e){return e.crossword.title===t})).map((function(t){return o.a.createElement("div",null,o.a.createElement("div",null,"Crossword:",t.crossword.title),o.a.createElement("div",null,"User: ",t.username),o.a.createElement("div",null,"Time: ",e.computeTime(t.time)),o.a.createElement("br",null))}))},e}return Object(l.a)(r,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("select",{onChange:this.handleOnChange,name:"filters"},o.a.createElement("option",{value:"none"},"No filter"),o.a.createElement("option",{value:"Hard Crossword"},"Hard Crossword Scores"),o.a.createElement("option",{value:"Easy Crossword"},"Easy Crossword Scores")),o.a.createElement("div",null,this.props.scores?this.renderScores(this.state.filter):4," "))}}]),r}(n.Component),g=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={text:"",isCorrect:!1},e.handleOnChange=function(t){e.state.text.length>0?e.setState({text:t.target.value.charAt(1).toUpperCase()},e.updateState):e.setState({text:t.target.value.toUpperCase()},e.updateState)},e.updateState=function(){console.log(e.state.text),e.state.text===e.props.square.letter.toUpperCase()?!1===e.state.isCorrect&&e.setState({isCorrect:!0},e.props.addCorrect()):!0===e.state.isCorrect&&e.setState({isCorrect:!1},e.props.reduceCorrect())},e}return Object(l.a)(r,[{key:"render",value:function(){return o.a.createElement("input",{style:{textAlign:"center",border:"none",outline:"none",width:"70%",height:"55%"},name:"name",type:"text",value:this.state.text,maxLength:"2",onChange:this.handleOnChange})}}]),r}(n.Component),O=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return o.a.createElement("div",null)}}]),r}(n.Component),E=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={rows:[],correct:0,time:0,won:!1,total:e.props.squares.filter((function(e){return!1===e.is_black})).length},e.clockTick=function(){e.setState((function(e){return{time:e.time+1}}))},e.addCorrect=function(){e.setState({correct:e.state.correct+1},e.checkTotal)},e.reduceCorrect=function(){e.setState({correct:e.state.correct-1},e.checkTotal)},e.checkTotal=function(){console.log(e.state.correct),e.state.correct===e.state.total&&!1===e.state.won&&(alert("You win! Your time was: ".concat(e.props.computeTime(e.state.time))),clearInterval(e.interval),e.props.handleWin(e.state.time),e.setState({won:!0}))},e.genMatrix=function(){var t;for(t=0;t<e.props.length;t++){var r=e.props.squares.filter((function(e){return e.y===t})),n=e.state.rows;n.push(r),e.setState({rows:n})}},e.genRows=function(){return e.state.rows.map((function(t,r){return o.a.createElement("tr",{key:r,className:"row"},e.genSquares(t))}))},e.genSquares=function(t){return t.map((function(t,r){return t.is_black?o.a.createElement("td",{key:r,style:{backgroundColor:"black",cssFloat:"left",width:"19px",height:"20Px",border:"1px solid black"}},o.a.createElement(O,{square:t})):o.a.createElement("td",{key:r,style:{cssFloat:"left",width:"19px",height:"20px",border:"1px solid black"}},o.a.createElement("div",{style:{fontSize:"8px",height:"20%"}},t.corner_value),o.a.createElement(g,{style:{height:"50%"},square:t,addCorrect:e.addCorrect,reduceCorrect:e.reduceCorrect}))}))},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.genMatrix(),this.interval=setInterval(this.clockTick,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"Time: ",this.props.computeTime(this.state.time)),o.a.createElement("table",{style:{display:"grid",width:"70%",height:"60%",borderCollapse:"Collapse"}},o.a.createElement("tbody",null,this.genRows())))}}]),r}(n.Component),y=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).renderHorizontals=function(){return e.props.clues.filter((function(e){return"horizontal"===e.orientation})).map((function(e){return o.a.createElement("li",null,e.number,": ",e.content)}))},e.renderVerticals=function(){return e.props.clues.filter((function(e){return"vertical"===e.orientation})).map((function(e){return o.a.createElement("li",null,e.number,": ",e.content)}))},e}return Object(l.a)(r,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",null,"Clues"),o.a.createElement("div",{style:{cssFloat:"left",margin:"10px"}},o.a.createElement("h3",null,"Across:"),o.a.createElement("ul",{style:{listStyleType:"none"}},this.renderHorizontals())),o.a.createElement("div",{style:{cssFloat:"left",margin:"10px"}},o.a.createElement("h3",null,"Verticals"),o.a.createElement("ul",{style:{listStyleType:"none"}},this.renderVerticals())))}}]),r}(n.Component),w=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={winTime:0},e.computeTime=function(e){var t=Math.floor(e/60),r=e-60*t;return"".concat(t,"m ").concat(r,"s")},e.renderTimes=function(){return e.props.test_scores.sort((function(e,t){return e.time-t.time})).slice(0,5).map((function(t){return o.a.createElement("li",null,t.username,": ",e.computeTime(t.time))}))},e.handleWin=function(t){console.log("hit"),e.setState({winTime:t},e.handlePost)},e.createCrosswords=function(){if(e.props.crossword)return o.a.createElement("div",null,o.a.createElement("h1",null,e.props.crossword.attributes.title),o.a.createElement("h3",null,"Best times:"),o.a.createElement("ol",null,e.renderTimes()),o.a.createElement(E,{computeTime:e.computeTime,squares:e.props.crossword.attributes.squares,handleWin:e.handleWin,length:e.props.crossword.attributes.length}),o.a.createElement(y,{clues:e.props.crossword.attributes.clues}))},e.handlePost=function(){console.log(e.props.crossword),e.props.postScore({score:e.state.winTime,username:e.props.current_user,crossword:e.props.crossword.id})},e}return Object(l.a)(r,[{key:"render",value:function(){return o.a.createElement("div",null,this.createCrosswords(),console.log(this.props.test_scores),o.a.createElement("button",{onClick:this.handlePost},"Test post score"))}}]),r}(n.Component),j=Object(d.b)((function(e,t){var r=t.crossword;return{current_user:e.current_user,test_scores:e.scores.filter((function(e){return e.crossword_id==r.id}))}}),(function(e){return{postScore:function(t){var r=t.score,n=t.username,o=t.crossword;e(function(e){var t=e.score,r=e.username,n=e.crossword;return console.log(t),console.log(r),console.log(n),function(e){fetch("https://mighty-bastion-16545.herokuapp.com/scores",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:r,time:t,crossword_id:n})}).then((function(e){return e.json()})).then((function(t){console.log(t),e({type:"ADD_SCORE",score:t})}))}}({score:r,username:n,crossword:o}))}}}))(w),C=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleAddUser=function(t){console.log(t),e.props.addUser(t)},e.renderCrosswordRoutes=function(){return e.props.crosswords.map((function(e){return o.a.createElement(h.a,{path:"/".concat(e.attributes.title.replace(/\s/g,"")),render:function(t){return o.a.createElement(j,Object.assign({},t,{crossword:e}))}})}))},e.handleLoading=function(){return e.props.loading?o.a.createElement("div",null,"Loading..."):o.a.createElement("div",null,o.a.createElement(h.a,{exact:!0,path:"/",render:function(t){return o.a.createElement(f,Object.assign({},t,{current_user:e.props.current_user}))}}),o.a.createElement(h.a,{path:"/index",render:function(t){return o.a.createElement(v,Object.assign({},t,{scores:e.props.scores}))}}),e.renderCrosswordRoutes())},e.loadHome=function(){return o.a.createElement("div",null,o.a.createElement(h.a,{path:"/",render:function(t){return o.a.createElement(b,Object.assign({},t,{handleAddUser:e.handleAddUser}))}}))},e.loadCrosswords=function(){return o.a.createElement("div",null,o.a.createElement(m,{crosswords:e.props.crosswords}),e.handleLoading())},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchCrosswords(),this.props.fetchScores(),this.props.fetchComments()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(p.a,null,this.props.current_user?this.loadCrosswords():this.loadHome()))}}]),r}(n.Component),S=Object(d.b)((function(e){return{crosswords:e.crosswords,loading:e.loading,current_user:e.current_user,scores:e.scores}}),(function(e){return{fetchCrosswords:function(){e((function(e){e({type:"LOADING_CROSSWORDS"}),fetch("https://mighty-bastion-16545.herokuapp.com/crosswords").then((function(e){return e.json()})).then((function(t){console.log(t.data),e({type:"ADD_CROSSWORDS",crosswords:t.data})}))}))},fetchScores:function(){e((function(e){e({type:"LOADING_SCORES"}),fetch("https://mighty-bastion-16545.herokuapp.com/scores").then((function(e){return e.json()})).then((function(t){e({type:"ADD_SCORES",scores:t})}))}))},fetchComments:function(){e((function(e){e({type:"LOADING_COMMENTS"}),fetch("https://mighty-bastion-16545.herokuapp.com/comments").then((function(e){return e.json()})).then((function(t){e({type:"ADD_COMMENTS",scores:t})}))}))},addUser:function(t){return e({type:"ADD_USER",text:t})}}}))(C),k=r(16),x=r(26);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=r(27),A=r(7),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{crosswords:[],scores:[],comments:[],loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(console.dir(e),t.type){case"LOADING_CROSSWORDS":return Object(A.a)(Object(A.a)({},e),{},{loading:!0});case"ADD_CROSSWORDS":return Object(A.a)(Object(A.a)({},e),{},{crosswords:t.crosswords,loading:!1});case"LOADING_SCORES":return Object(A.a)(Object(A.a)({},e),{},{loading:!0});case"ADD_SCORES":return Object(A.a)(Object(A.a)({},e),{},{scores:t.scores,loading:!1});case"LOADING_COMMENTS":return Object(A.a)(Object(A.a)({},e),{},{loading:!0});case"ADD_COMMENTS":return console.log("this has been hit"),Object(A.a)(Object(A.a)({},e),{},{comments:t.comments,loading:!1});case"ADD_USER":return Object(A.a)(Object(A.a)({},e),{},{current_user:t.text,loading:!1});case"ADD_SCORE":return console.log(e.scores),Object(A.a)(Object(A.a)({},e),{},{scores:[].concat(Object(_.a)(e.scores),[t.score])});default:return e}},T=Object(k.c)(D,Object(k.a)(x.a));c.a.render(o.a.createElement(d.a,{store:T},o.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.7c28a5e5.chunk.js.map